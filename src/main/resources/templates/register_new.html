<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registration</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/styles.css" />
</head>
 <!-- Register Page -->
<body>
    <div>
        <div id="popupmain" style="
          display: none;
          top: 0px;
          left: 0px;
          right: 0px;
          bottom: 0px;
          font-family: Barlow;
          color: #7c859b;
          font-size: 18px;
          font-weight: 500;
        ">
            <div id="popup" style="overflow-y: scroll">
                <h2 id="newsHeading" style="padding-top: 5%">Instructions</h2>

                <video autoplay id="videomute" width="400" controls disablefullscreen disablepictureinpicture controlslist="nodownload noplaybackrate nofullscreen">
            <source
              src="https://cdn.kapwing.com/final_61ed201102d1de0096d826e8_498395.mp4"
              type="video/mp4"
            />

            Your browser does not support HTML video.
          </video>

                <div style="padding: 0% 5% 5% 5%">
                    <h4 style="padding-top: 5%; text-align: left">
                        <b><u>Follow the Instructions</u></b>
                    </h4>
                    <h6 style="text-align: justify">Please be careful, while filling in your details.</h6>
                    <hr />
                    <h6 style="text-align: justify"> Make sure, that you fill in your correct, and latest details according to your official ID. </h6>
                    <hr />
                    <h6 style="text-align: justify">Do not leave any field empty, as the form will not submit, unless you fill all the fields. </h6>
                    <hr />
                    <h6 style="text-align: justify">The files which you need to upload, must be below 2 MB. </h6>
                    <hr />
                    <h6 style="text-align: justify">Read the instructions below carefully, for better understanding. </h6>
                    <hr />

                </div>
                <button onclick="enableMute()" style="margin: 20px" class="btn btn-primary btn-success" id="buttonid">
    OK
</button>

            </div>


        </div>
    </div>

    <div class="row shadow-lg p-3 mb-5 bg-body" style="border-radius: 2%">
        <!-- instructions -->

        <!--Left half -->

        <div class="col-lg-5">
            <center>
                <img class="voting-img" src="https://image.freepik.com/free-vector/voting-concept-illustration_114360-5972.jpg" alt="" />
            </center>




            <!-- https://png.pngtree.com/png-clipart/20201208/original/pngtree-hand-drawn-cartoon-american-presidential-election-love-box-illustration-png-image_5525991.jpg -->

        </div>

        <!--Right half -->

        <div class="col-lg-7 right">
            <h2>Get Started</h2>
            <p>
                Already have an account.

                <a th:href="@{'/index'}">Log in</a> here.
            </p>
            <form class="row g-3" style="margin: 10px 20px" th:action="@{/register}" method="post" th:object="${user}" enctype="multipart/form-data">
                <div>
                    <div class="col">
                        <label for="inputEmail4" class="form-label">First Name</label>
                        <input id="fname" type="text" th:field="*{firstname}" required class="form-control" placeholder="First name" />
                    </div>
                    <div class="col">
                        <label for="inputEmail4" class="form-label">Last Name</label>
                        <input id="lname" type="text" th:field="*{lastname}" required class="form-control" placeholder="Last name" />
                    </div>
                    <div class="col">
                        <label for="inputEmail4" class="form-label">Password </label>
                        <input id="pass" type="password" th:field="*{password}" required class="form-control" placeholder="Password (at least 8 characters)" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" />
                        <input type="checkbox" onclick="myShow()" style="top: 5px" />Show Password
                    </div>
                    <div id="message">
                        <h3 style="
                    font-size: 15px;
                    padding-left: 20px;
                    padding-bottom: 0px;
                    margin-bottom: 10px;
                  ">
                            Your Password must contain the following:
                        </h3>
                        <p id="letter" class="invalid">A <b>Lowercase</b> letter</p>
                        <p id="capital" class="invalid">
                            A <b>Capital (uppercase)</b> letter
                        </p>
                        <p id="number" class="invalid">A <b>Number</b></p>
                        <p id="length" class="invalid">Minimum <b>8 characters</b></p>
                    </div>
                </div>

                <div class="col-md-6">
                    <label for="inputDOB" class="form-label">Date of Birth</label>
                    <input id="birth" type="date" th:field="*{birthday}" required class="form-control" placeholder="DD/MM/YYYY" />
                </div>
                <div class="col-md-6">
                    <label for="inputState" class="form-label">Gender</label>
                    <select id="inputState" th:field="*{gender}" required class="form-select">
                <option
                  th:each="p : ${listgender}"
                  th:value="${p}"
                  th:text="${p}"
                ></option>
              </select>
                </div>
                <div class="col-12">
                    <label for="inputMobile" class="form-label">Mobile Number</label>
                    <input type="text" th:field="*{mobileno}" required class="form-control" id="inputmobile" placeholder="Enter your Mobile Number" minlength="10" />
                </div>
                <div class="col-12">
                    <label for="inputEmail" class="form-label">Email</label>
                    <input type="text" th:field="*{email}" required class="form-control" id="inputEmail" placeholder="Enter your email" />
                </div>
                <div class="col-12">
                    <label for="inputAddress" class="form-label">Adhaar No.</label>
                    <input id="adhaar" type="text" th:field="*{username}" required class="form-control" placeholder="Enter your 12 digit Adhaar number" minlength="12" />
                </div>

                <div class="col-12">
                    <label>Photos: </label>
                    <input type="file" name="image" id="fileimage" required class="form-control" accept="image/png, image/jpeg, image/jpg" /><br />

                    <p>
                        <img id="thumbnail" alt="Logo Preview" src="" height="200px" width="150px" style="margin-left: 200px; display: none" />
                    </p>
                </div>

                <div class="col-12">
                    <label for="inputAddress2" class="form-label">Address</label>
                    <input type="text" th:field="*{address}" required class="form-control" id="inputAddress2" placeholder="Apartment, studio, or floor" />
                </div>

                <div class="col-md-4">
                    <label for="inputState" class="form-label">State</label>
                    <select id="inputState" th:field="*{state}" required class="form-select">
                <option
                  th:each="l : ${liststates}"
                  th:value="${l}"
                  th:text="${l}"
                ></option>
              </select>
                </div>

                <div class="col-md-4">
                    <label for="inputCity" class="form-label">City</label>
                    <input type="text" th:field="*{city}" required class="form-control" id="inputCity" />
                </div>
                <div class="col-md-4">
                    <label for="inputZip" class="form-label">Zip</label>
                    <input type="text" th:field="*{zip}" required class="form-control" id="inputZip" />
                </div>
                <div class="col-12">
                    <div class="form-check">
                        <input class="form-check-input" required type="checkbox" id="gridCheck" />
                        <label class="form-check-label" for="gridCheck">
                  I agree to all Terms and Conditions.
                </label>
                    </div>
                </div>
                <div class="col-12">
                    <div class="d-grid gap-2">
                        <button type="button" id="btn" class="btn btn-outline-primary btn-lg" onclick="sweetalertclick()">
                  Register
                </button>
                        <button type="submit" id="btn1" hidden class="btn btn-outline-primary btn-lg">
                  Register
                </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/SweetAlert/sweetalert2.all.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script type="text/javascript" th:inline="javascript">
        var cond = true;
        $(document).ready(function() {
            setTimeout(function() {
                $("#popupmain").css("display", "block");
                localStorage.setItem("popState", "shown");
            }, 1000);
        });

        $("#instruction").click(function() {
            $("#popupmain").css("display", "block");
        });

        $("#buttonid").click(function() {
            $("#popupmain").css("display", "none");
        });

        var vid = document.getElementById("videomute");

        function enableMute() {
            vid.muted = true;
        }

        

        var myInput = document.getElementById("pass");
        var letter = document.getElementById("letter");
        var capital = document.getElementById("capital");
        var number = document.getElementById("number");
        var length = document.getElementById("length");

        // When the user clicks on the password field, show the message box
        myInput.onfocus = function() {
            document.getElementById("message").style.display = "block";
        };

        // When the user clicks outside of the password field, hide the message box
        myInput.onblur = function() {
            document.getElementById("message").style.display = "none";
        };

        // When the user starts to type something inside the password field
        myInput.onkeyup = function() {
            // Validate lowercase letters
            var lowerCaseLetters = /[a-z]/g;

            if (myInput.value.match(lowerCaseLetters)) {
                letter.classList.remove("invalid");
                letter.classList.add("valid");
                cond = true;
            } else {
                letter.classList.remove("valid");
                letter.classList.add("invalid");
                cond = false;
            }

            // Validate capital letters

            var upperCaseLetters = /[A-Z]/g;
            if (myInput.value.match(upperCaseLetters)) {
                capital.classList.remove("invalid");
                capital.classList.add("valid");
            } else {
                capital.classList.remove("valid");
                capital.classList.add("invalid");
                cond = false;
            }

            // Validate numbers
            var numbers = /[0-9]/g;
            if (myInput.value.match(numbers)) {
                number.classList.remove("invalid");
                number.classList.add("valid");
            } else {
                number.classList.remove("valid");
                number.classList.add("invalid");
                cond = false;
            }

            // Validate length
            if (myInput.value.length >= 8) {
                length.classList.remove("invalid");
                length.classList.add("valid");
            } else {
                length.classList.remove("valid");
                length.classList.add("invalid");
                cond = false;
            }
        };

        // ----------------------------------------------------------------

        function sweetalertclick() {
            var fname = $("#fname").val();
            var lname = $("#lname").val();
            var pass = $("#pass").val();
            var birth = $("#birth").val();
            var gender = $("#gender").val();
            var adhaar = $("#adhaar").val();
            var photo = $("#fileimage").val();
            var add = $("#inputAddress2").val();
            var inputState = $("#inputstate").val();
            var city = $("#inputCity").val();
            var zip = $("#inputZip").val();
            var phone = $("#inputmobile").val();
            var gridcheck = document.getElementById("gridCheck").checked;

            if (
                fname == "" ||
                lname == "" ||
                pass == "" ||
                birth == "" ||
                gender == "" ||
                adhaar == "" ||
                photo == "" ||
                add == "" ||
                inputState == "" ||
                city == "" ||
                zip == "" ||
                phone == "" ||
                gridcheck == false
            ) {
                swal({
                    title: "Fields empty",
                    text: "Please check the fields",
                    icon: "warning",
                    button: "ok",
                });
            } else if (adhaar.length != 12) {
                swal({
                    title: "Please enter a 12 digit Adhar ID",
                    text: "Please check your details",
                    icon: "warning",
                    button: "ok",
                });
            } else if (cond == false) {
                swal({
                    title: "Please check your password again",
                    text: "You need to satisfy all the mentioned conditions",
                    icon: "warning",
                    button: "ok",
                });
            } else if (phone.length != 10) {
                swal({
                    title: "Please enter a 10 digit mobile number",
                    text: "Please check your details",
                    icon: "warning",
                    button: "ok",
                });
            } else {
                swal({
                    title: "Are you sure ?",
                    text: "Click OK to continue and CANCEL to go back.",
                    icon: "warning",
                    buttons: true,
                    dangerMode: true,
                }).then((willDelete) => {
                    if (willDelete) {
                        document.getElementById("btn1").click();
                        swal({
                            title: "Registration Successful",
                            text: "Redirecting you to the Login Page",
                            icon: "success",
                            buttons: false,
                        }).then(function() {
                            //document.getElementById("btn1").click();
                            document.write("Redirecting to Index Page");
                            //document.location.href = "/index";
                        });
                    } else {
                        swal("Your data is not save!");
                    }
                });
            }
        }

        $(document).ready(function() {
            $("#fileimage").change(function() {
                showImageThumbnail(this);
            });
        });

        function showImageThumbnail(fileInput) {
            file = fileInput.files[0];
            reader = new FileReader();

            reader.onload = function(e) {
                $("#thumbnail").attr("src", e.target.result);
                $("#thumbnail").css("display", "block");
            };
            reader.readAsDataURL(file);
        }
    </script>

    <script>
        function myShow() {
            var x = document.getElementById("pass");
            if (x.type === "password") {
                x.type = "text";
            } else {
                x.type = "password";
            }
        }
    </script>
</body>

</html>